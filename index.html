function submitToWA() {
    const subProduct = document.getElementById('sub-product-select').value;
    const buyerName = document.getElementById('buyer-name').value;
    const num = document.getElementById('buyer-number').value;
    const email = document.getElementById('buyer-email').value;
    const addr = document.getElementById('buyer-address').value;
    
    // Validasi
    if(!subProduct || !buyerName || !num) { 
        alert("Mohon lengkapi data wajib!\n- Jenis Layanan\n- Nama Pembeli\n- Nomor WhatsApp"); 
        return; 
    }
    
    const cleanNum = num.replace(/\D/g, '');
    
    // Format WhatsApp message
    let formatData = "";
    if (currentProduct.includes("Rekening") && !currentProduct.includes("Koran")) {
        if (subProduct.toLowerCase().includes('bebasan')) {
            formatData = `\nðŸ“‹ FORMAT DATA BEBASAN:\nâ€¢ Pilih data: Cewek / Cowok\nâ€¢ Nama Bank:\nâ€¢ No:\nâ€¢ Gmail:\nâ€¢ Alamat:`;
        } else {
            formatData = `\nðŸ“‹ FORMAT DATA:\nâ€¢ Nama Rekening:\nâ€¢ Nama Bank:\nâ€¢ No:\nâ€¢ Gmail:\nâ€¢ Alamat:`;
        }
    }
    
    const msg = `âš¡ *KONFIRMASI PEMBAYARAN - MFH STORE* âš¡\n` + 
                `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n` + 
                `ðŸ›’ *Kategori* : ${currentProduct}\n` + 
                `ðŸ¦ *Jenis Layanan* : ${subProduct}\n` + 
                `ðŸ‘« *Nama* : ${buyerName}\n` + 
                `ðŸ“± *WhatsApp* : ${cleanNum}\n` + 
                `ðŸ“§ *Email* : ${email || '-'}\n` + 
                `ðŸ“ *Keterangan* : ${addr || '-'}\n` + 
                `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n` + 
                `${formatData}\n\n` +
                `ðŸ’¡ *SOP PENDAFTARAN:*\n` +
                `1. Siapkan No HP & Gmail Aktif\n` +
                `2. Pulsa min. 5rb & Kartu di SIM 1\n` +
                `3. Stay standby untuk kode verifikasi\n` +
                `4. User ID sesuai permintaan Team Agen\n` +
                `5. Cek kembali No & Gmail (tidak bisa diubah)\n\n` +
                `ðŸ’° *SISTEM PAY:*\n` +
                `Akun jadi baru BAYAR LUNAS\n\n` +
                `â° *ESTIMASI:* 20-30 menit\n` +
                `ðŸ›¡ï¸ *GARANSI:* 30 hari\n` +
                `*STATUS: SIAP BAYAR SETELAH AKUN JADI*`;
    
    const whatsappUrl = `https://wa.me/6281998593873?text=${encodeURIComponent(msg)}`;
    window.open(whatsappUrl, '_blank');
    
    // Update progress
    document.querySelectorAll('.checkout-progress .step').forEach((step, index) => {
        step.classList.remove('active');
        if (index === 2) step.classList.add('active');
    });
}
